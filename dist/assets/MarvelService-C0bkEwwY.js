import{r as c}from"./index-DVIZrL47.js";const h=()=>{const[u,a]=c.useState(!1),[p,i]=c.useState(null),n=c.useCallback(async(l,t="GET",d=null,g={})=>{a(!0);try{const r=await fetch(l,{method:t,body:d,headers:g});if(!r.ok)throw new Error(`Could not fetch ${l}, response status: ${r.status}`);const $=await r.json();return a(!1),$}catch(r){throw a(!1),i(r.message),r}},[]),o=c.useCallback(()=>i(null),[]);return{loading:u,request:n,error:p,clearError:o}},b=()=>{const{loading:u,request:a,error:p,clearError:i}=h(),n="https://marvel-server-zeta.vercel.app/",o="apikey=d4eecb0c66dedbfae4eab45d312fc1df",l=0;let t=0;const d=async(e=l)=>(t++,console.log(`游대 API Request #${t}: getAllCharacters (offset: ${e})`),(await a(`${n}characters?limit=6&offset=${e}&${o}`)).data.results.map(m)),g=async(e=l)=>(t++,console.log(`游대 API Request #${t}: getAllComics (offset: ${e})`),(await a(`${n}comics?limit=6&offset=${e}&${o}`)).data.results.map(f)),r=async e=>{t++,console.log(`游대 API Request #${t}: getCharacter (id: ${e})`);const s=await a(`${n}characters/${e}?${o}`);return m(s.data.results[0])},$=async e=>{t++,console.log(`游대 API Request #${t}: getAComic (id: ${e})`);const s=await a(`${n}comics/${e}?${o}`);if(!s||!s.data||!s.data.results||s.data.results.length===0)throw new Error("Comic not found");return f(s.data.results[0])},m=e=>({id:e.id,name:e.name,description:e.description,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}),f=e=>({id:e.id,title:e.title,description:e.description||"There is no decription",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices[0].price?`${e.prices[0].price}$`:"Not available",pages:e.pageCount?`${e.pageCount} p.`:"No information about the number of pages",languages:e.textObjects.languages||"en-us"});return{loading:u,error:p,clearError:i,getAllCharacters:d,getCharacter:r,getAllComics:g,getAComic:$}};export{b as u};
