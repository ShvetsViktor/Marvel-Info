import{r as n,j as e,N as S,S as C}from"./index-DVIZrL47.js";import{u as y}from"./MarvelService-C0bkEwwY.js";import{E as A}from"./ErrorMessage-OEIhc3ax.js";import{E as B}from"./ErrorBoundary-gdrwmpYX.js";const k=p=>{const[a,l]=n.useState([]),t=n.useRef(!1),[f,j]=n.useState(!1),g=n.useRef(!1),o=n.useRef(0),h=n.useRef([]),{loading:_,error:v,getAllComics:b}=y();n.useEffect(()=>(d(o.current,!0),window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[]);const d=(r,c)=>{f||t.current||(c||(t.current=!0),b(r).then(N).finally(()=>{t.current=!1}))},N=r=>{l(c=>{const s=new Set(c.map(m=>m.id)),u=r.filter(m=>!s.has(m.id)),i=[...c,...u];return o.current=i.length,r.length<6&&(j(!0),g.current=!0),i})},x=()=>{if(t.current||g.current)return;window.innerHeight+window.scrollY>=document.body.offsetHeight-50&&d(o.current,!1)};function w(r){const c=r.map((s,u)=>e.jsxs("li",{className:"comics__item",tabIndex:0,ref:i=>h.current[u]=i,children:[e.jsx(S,{to:`/comics/${s.id}`,children:e.jsx("img",{src:s.thumbnail,alt:s.title})}),e.jsx("div",{className:"comics__name",children:s.title}),e.jsx("div",{className:"comics__price",children:s.price})]},s.id));return e.jsx("ul",{className:"comics__grid",children:c})}const E=w(a),L=v?e.jsx(A,{}):null,R=_?e.jsx(C,{}):null;return e.jsxs("div",{className:"comics__list",children:[L,R,E,e.jsx("button",{disabled:t.current,style:{display:f?"none":"block"},className:"button button__main button__long",onClick:()=>{d(o.current,!1)},children:e.jsx("div",{className:"inner",children:"load more"})})]})},I="/assets/Avengers-B-LhCFDs.png",M="/assets/Avengers_logo-qQtRsob-.png",q=()=>e.jsxs("div",{className:"app__banner",children:[e.jsx("img",{src:I,alt:"Avengers"}),e.jsxs("div",{className:"app__banner-text",children:["New comics every week!",e.jsx("br",{}),e.jsx("span",{children:"Stay tuned!"})]}),e.jsx("img",{src:M,alt:"Avengers logo"})]}),Q=()=>{const[p,a]=n.useState(null),l=t=>{a(t)};return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(B,{children:e.jsx(k,{onComicsSelected:l})})]})};export{Q as default};
